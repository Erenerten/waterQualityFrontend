<!-- public/login/login.html -->
<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>Giriş | AEA</title>

  <!-- Poppins font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">

  <style>
    :root{
      --primary:#004f98; --accent:#2196f3;
      --light:#ffffff;  --dark:#14213d;  --text:#333;
    }
    *{margin:0;padding:0;box-sizing:border-box;font-family:'Poppins',sans-serif}
    body,html{height:100%;overflow:hidden}

    /* ------- video bg ------- */
   

    /* ------- form card ------- */
    .center-wrapper{
      display:flex;align-items:center;justify-content:center;height:100%
    }
    .login-box{
      width:100%;max-width:400px;padding:40px;
      background:rgba(255,255,255,.9);border-radius:12px;
      box-shadow:0 8px 20px rgba(0,0,0,.15)
    }
    .login-box h2{margin-bottom:30px;font-weight:600;color:var(--dark);text-align:center}
    .form-group{margin-bottom:20px}
    .form-group label{display:block;margin-bottom:8px;color:var(--text)}
    .form-group input{
      width:100%;padding:12px 15px;border:1px solid #ddd;border-radius:6px;
      outline:none;transition:border .3s
    }
    .form-group input:focus{border-color:var(--accent)}
    .btn-login{
      width:100%;padding:12px;border:none;border-radius:6px;
      background:var(--accent);color:#fff;font-size:1rem;cursor:pointer;
      transition:background .3s
    }
     .video-bg {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      z-index: -1;
    }
    .btn-login:hover{background:var(--primary)}
    .login-footer{margin-top:20px;text-align:center;font-size:.9rem}
    .login-footer a{color:var(--accent);text-decoration:none}
    .login-footer a:hover{text-decoration:underline}
  </style>
</head>

<body>
  <!-- background video (forward-slashes!! ) -->
  <video autoplay muted loop class="video-bg">
    <source src="videos\hero.mp4" type="video/mp4">
    Your browser does not support the video tag.
  </video>

  <div class="center-wrapper">
    <div class="login-box">
      <h2>AEA&nbsp;Giriş</h2>

      <!-- ===== login form ===== -->
      <form id="login-form">
        <div class="form-group">
          <label for="username">Kullanıcı Adı</label>
          <input id="username" name="username" required />
        </div>
        <div class="form-group">
          <label for="password">Şifre</label>
          <input type="password" id="password" name="password" required />
        </div>
        <button class="btn-login" type="submit">Giriş</button>
      </form>

      <div class="login-footer">
        <p>Hesabınız yok mu? <a href="#">Kayıt Ol</a></p>
      </div>
    </div>
  </div>

  <!-- ===== login logic (unchanged API flow) ===== -->
  <script>
    document.getElementById('login-form').addEventListener('submit', async e => {
      e.preventDefault();
      const username = e.target.username.value;
      const password = e.target.password.value;

      try {
        const res = await fetch('/api/auth/login', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ username, password })
        });
        if (!res.ok) throw new Error('Sunucu yanıtı: ' + res.status);

        const { jwt } = await res.json();
        localStorage.setItem('token', jwt);
        location.href = '/dashboard/dashboard.html';
      } catch (err) {
        alert('Giriş başarısız: ' + err.message);
      }
    });
  </script>
</body>
</html>
